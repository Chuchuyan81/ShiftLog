<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ—É—Ä–Ω–∞–ª –†–∞–±–æ—á–∏—Ö –°–º–µ–Ω</title>
    <link rel="stylesheet" href="style.css?v=2.6.0&t=1730811456">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="–ñ—É—Ä–Ω–∞–ª –†–∞–±–æ—á–∏—Ö –°–º–µ–Ω - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ä–∞–±–æ—á–∏—Ö —Å–º–µ–Ω –∏ —Ä–∞—Å—á–µ—Ç–∞ –∑–∞—Ä–∞–±–æ—Ç–∫–∞">
    <meta name="keywords" content="—É—á–µ—Ç —Å–º–µ–Ω, –∑–∞—Ä–∞–±–æ—Ç–æ–∫, –∂—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç—ã, —Å–º–µ–Ω—ã, –∑–∞—Ä–ø–ª–∞—Ç–∞">
    <meta name="author" content="ShiftLog Team">
    <meta name="application-name" content="–ñ—É—Ä–Ω–∞–ª –†–∞–±–æ—á–∏—Ö –°–º–µ–Ω">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- PWA Meta —Ç–µ–≥–∏ -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ShiftLog">
    <meta name="msapplication-TileColor" content="#2563eb">
    <meta name="msapplication-config" content="browserconfig.xml">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Apple Touch –∏–∫–æ–Ω–∫–∏ -->
    <link rel="apple-touch-icon" sizes="180x180" href="icon-192.svg">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-192.svg">
    <link rel="apple-touch-icon" sizes="120x120" href="icon-192.svg">
    
    <!-- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ -->
    <link rel="icon" type="image/svg+xml" href="icon-192.svg">
    <link rel="shortcut icon" href="favicon.ico">
    
    <!-- Open Graph -->
    <meta property="og:title" content="–ñ—É—Ä–Ω–∞–ª –†–∞–±–æ—á–∏—Ö –°–º–µ–Ω">
    <meta property="og:description" content="–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ä–∞–±–æ—á–∏—Ö —Å–º–µ–Ω">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://shiftlog.netlify.app">
    <meta property="og:image" content="https://shiftlog.netlify.app/icon-512.svg">
    <link rel="canonical" href="https://shiftlog.netlify.app">
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading-screen" class="loading-screen">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
        <div id="auth-screen" class="screen hidden">
            <div class="auth-container">
                <h1>–ñ—É—Ä–Ω–∞–ª –†–∞–±–æ—á–∏—Ö –°–º–µ–Ω</h1>
                <div class="auth-tabs">
                    <button class="tab-btn active" data-tab="login">–í—Ö–æ–¥</button>
                    <button class="tab-btn" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
                
                <form id="auth-form" class="auth-form">
                    <div class="form-group">
                        <input type="email" id="email" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    </div>
                    <div class="form-group hidden" id="confirm-password-group">
                        <input type="password" id="confirm-password" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                </form>
                
                <button id="forgot-password-btn" class="btn btn-link">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</button>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
        <div id="main-app" class="screen hidden">
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <nav class="nav-bar">
                <button class="nav-btn active" data-screen="shifts">–ñ—É—Ä–Ω–∞–ª</button>
                <button class="nav-btn" data-screen="reports">–ò—Ç–æ–≥–∏</button>
                <button class="nav-btn" data-screen="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <!-- –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
                <button class="nav-btn install-btn" id="install-btn" style="display: none;">
                    <span class="install-icon">üì±</span>
                    <span class="install-text">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</span>
                </button>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è PWA -->
                <button class="nav-btn update-btn" id="update-btn" style="display: none;">
                    <span class="update-icon">üîÑ</span>
                    <span class="update-text">–û–±–Ω–æ–≤–∏—Ç—å</span>
                </button>
            </nav>

            <!-- –≠–∫—Ä–∞–Ω –∂—É—Ä–Ω–∞–ª–∞ -->
            <div id="shifts-screen" class="content-screen">
                <div class="screen-header">
                    <h2>–ñ—É—Ä–Ω–∞–ª —Å–º–µ–Ω</h2>
                    <div class="month-navigation">
                        <button class="btn btn-icon" id="prev-month">‚Üê</button>
                        <span id="current-month">–Ø–Ω–≤–∞—Ä—å 2024</span>
                        <button class="btn btn-icon" id="next-month">‚Üí</button>
                    </div>
                </div>
                
                <div class="shifts-controls">
                    <div class="sort-controls">
                        <label for="sort-select">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                        <select id="sort-select">
                            <option value="date-desc">–ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                            <option value="date-asc">–ü–æ –¥–∞—Ç–µ (—Å—Ç–∞—Ä—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                            <option value="earnings-desc">–ü–æ –∑–∞—Ä–∞–±–æ—Ç–∫—É (–±–æ–ª—å—à–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                            <option value="earnings-asc">–ü–æ –∑–∞—Ä–∞–±–æ—Ç–∫—É (–º–µ–Ω—å—à–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                            <option value="venue">–ü–æ –∑–∞–≤–µ–¥–µ–Ω–∏—é</option>
                        </select>
                    </div>
                </div>
                
                <div class="shifts-container">
                    <div id="shifts-list" class="shifts-list">
                        <!-- –°–º–µ–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <button class="fab" id="add-shift-btn">+</button>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤ -->
            <div id="reports-screen" class="content-screen hidden">
                <div class="screen-header">
                    <h2>–ò—Ç–æ–≥–∏</h2>
                    <div class="month-navigation">
                        <button class="btn btn-icon" id="reports-prev-month">‚Üê</button>
                        <span id="reports-current-month">–Ø–Ω–≤–∞—Ä—å 2024</span>
                        <button class="btn btn-icon" id="reports-next-month">‚Üí</button>
                    </div>
                </div>
                
                <div class="reports-content">
                    <div class="report-section">
                        <h3>–ü—Ä–æ–¥–∞–∂–∏</h3>
                        <div id="sales-stats" class="stats-grid">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ -->
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h3>–§–∏–Ω–∞–Ω—Å—ã</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞:</span>
                                <span class="stat-value" id="total-revenue">0 ‚ÇΩ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–û–±—â–∏–π –≤—ã—Ö–æ–¥:</span>
                                <span class="stat-value" id="total-payout">0 ‚ÇΩ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–û–±—â–∏–π —á–∞–π:</span>
                                <span class="stat-value" id="total-tips">0 ‚ÇΩ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ (–≥—Ä–æ—Å—Å):</span>
                                <span class="stat-value" id="gross-earnings">0 ‚ÇΩ</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>–ü—Ä–µ–º–∏—è:</label>
                            <input type="number" id="bonus-input" placeholder="0" min="0">
                        </div>
                        
                        <div class="stat-item total">
                            <span class="stat-label">–ß–∏—Å—Ç—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫:</span>
                            <span class="stat-value" id="net-earnings">0 ‚ÇΩ</span>
                        </div>
                        
                        <div class="form-group">
                            <label>–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è:</label>
                            <input type="date" id="payment-date">
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" id="export-btn">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div id="settings-screen" class="content-screen hidden">
                <div class="screen-header">
                    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                </div>
                
                <div class="settings-content">
                    <div class="settings-section">
                        <h3>–ó–∞–≤–µ–¥–µ–Ω–∏—è</h3>
                        <div id="venues-list" class="list-items">
                            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏–π -->
                        </div>
                        <button class="btn btn-secondary" id="add-venue-btn">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∏–µ</button>
                    </div>
                    
                    <div class="settings-section" style="display: none;">
                        <h3>–ü–æ–∑–∏—Ü–∏–∏/–£—Å–ª—É–≥–∏</h3>
                        <div id="products-list" class="list-items">
                            <!-- –ü–æ–∑–∏—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–≤–µ–¥–µ–Ω–∏—è -->
                        </div>
                        <button class="btn btn-secondary" id="add-product-btn">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é</button>
                    </div>
                    
                    <div class="settings-section">
                        <h3>–í–∞–ª—é—Ç–∞</h3>
                        <div class="form-group">
                            <select id="currency-select">
                                <option value="‚ÇΩ">‚ÇΩ (–†—É–±–ª—å)</option>
                                <option value="$">$ (–î–æ–ª–ª–∞—Ä)</option>
                                <option value="‚Ç¨">‚Ç¨ (–ï–≤—Ä–æ)</option>
                                <option value="p.">p. (–†—É–±–ª—å)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫</h3>
                        <div class="form-group">
                            <button class="btn btn-warning" id="clear-cache-btn">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
                            <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">
                                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
                            </small>
                        </div>
                    </div>
                    
                    <button class="btn btn-danger" id="logout-btn">–í—ã—Ö–æ–¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="shift-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="shift-modal-title">–î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É</h3>
                <button class="btn btn-icon" id="close-shift-modal">√ó</button>
            </div>
            <form id="shift-form" class="modal-body">
                <div class="form-group">
                    <label>–î–∞—Ç–∞:</label>
                    <input type="date" id="shift-date" required>
                </div>
                
                <div class="form-group">
                    <label>–°—Ç–∞—Ç—É—Å –¥–Ω—è:</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="workday" value="true" checked>
                            –†–∞–±–æ—á–∏–π –¥–µ–Ω—å
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="workday" value="false">
                            –í—ã—Ö–æ–¥–Ω–æ–π
                        </label>
                    </div>
                </div>
                
                <div id="work-fields">
                    <div class="form-group">
                        <label>–ó–∞–≤–µ–¥–µ–Ω–∏–µ:</label>
                        <select id="shift-venue" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ</option>
                        </select>
                    </div>
                    
                    <div id="product-fields">
                        <!-- –ü–æ–ª—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <div class="form-group">
                        <label>–í—ã—Ö–æ–¥ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞):</label>
                        <input type="number" id="shift-payout" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label>–ß–∞–µ–≤—ã–µ:</label>
                        <input type="number" id="shift-tips" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group readonly">
                        <label>–í—ã—Ä—É—á–∫–∞:</label>
                        <input type="text" id="shift-revenue" readonly>
                    </div>
                    
                    <div class="form-group readonly">
                        <label>–ó–∞—Ä–∞–±–æ—Ç–æ–∫:</label>
                        <input type="text" id="shift-earnings" readonly>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-shift">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-danger hidden" id="delete-shift">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="venue-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="venue-modal-title">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∏–µ</h3>
                <button class="btn btn-icon" id="close-venue-modal">√ó</button>
            </div>
            <form id="venue-form" class="modal-body">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è:</label>
                    <input type="text" id="venue-name" required>
                </div>
                
                <div class="form-group">
                    <label>–°—Ç–∞–≤–∫–∞ –∑–∞ –≤—ã—Ö–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:</label>
                    <input type="number" id="venue-payout" min="0" step="0.01">
                </div>
                
                <!-- –°–µ–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è -->
                <div class="form-group">
                    <label>–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è:</label>
                    <div id="venue-products-list" class="venue-products-list">
                        <p class="empty-message">–ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏—è</p>
                    </div>
                    <button type="button" class="btn btn-secondary" id="add-venue-product" style="margin-top: 10px;">
                        + –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
                    </button>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-venue">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-danger hidden" id="delete-venue">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="product-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é</h3>
                <button class="btn btn-icon" id="close-product-modal">√ó</button>
            </div>
            <form id="product-form" class="modal-body">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏/—É—Å–ª—É–≥–∏:</label>
                    <input type="text" id="product-name" required>
                </div>
                
                <div class="form-group">
                    <label>–¶–µ–Ω–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è –∑–∞ –µ–¥–∏–Ω–∏—Ü—É:</label>
                    <input type="number" id="product-price" min="0" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>–ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏:</label>
                    <select id="commission-type" required>
                        <option value="fixed">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É</option>
                        <option value="percentage">–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç —Ü–µ–Ω—ã –∑–∞–≤–µ–¥–µ–Ω–∏—è</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label id="commission-label">–ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏:</label>
                    <input type="number" id="commission-value" min="0" step="0.01" required>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-product">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-danger hidden" id="delete-product">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="message-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="message-title">–°–æ–æ–±—â–µ–Ω–∏–µ</h3>
                <button class="btn btn-icon" id="close-message-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p id="message-text"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="close-message">OK</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Supabase –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö CDN -->
    <script>
        console.log('üîÑ –ù–∞—á–∏–Ω–∞—é –∑–∞–≥—Ä—É–∑–∫—É Supabase...');
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ —Å Promise
        function loadScript(url) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.async = true;
                script.src = url;
                
                script.onload = () => {
                    console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω —Å–∫—Ä–∏–ø—Ç: ${url}`);
                    resolve();
                };
                
                script.onerror = () => {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞: ${url}`);
                    reject(new Error(`Failed to load ${url}`));
                };
                
                document.head.appendChild(script);
            });
        }
        
        // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö CDN
        async function loadSupabase() {
            const cdnUrls = [
                'https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js',
                'https://cdn.skypack.dev/@supabase/supabase-js@2',
                'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2',
                'https://esm.sh/@supabase/supabase-js@2'
            ];
            
            for (const url of cdnUrls) {
                try {
                    console.log(`üîÑ –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å: ${url}`);
                    await loadScript(url);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ Supabase –¥–æ—Å—Ç—É–ø–µ–Ω
                    if (window.supabase || window.SupabaseJS) {
                        if (window.SupabaseJS && !window.supabase) {
                            window.supabase = window.SupabaseJS;
                        }
                        console.log('‚úÖ Supabase —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω');
                        return true;
                    }
                } catch (error) {
                    console.warn(`‚ö†Ô∏è CDN ${url} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π...`);
                    continue;
                }
            }
            
            console.error('‚ùå –í—Å–µ CDN –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã');
            return false;
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        loadSupabase().then(success => {
            if (!success) {
                console.error('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: Supabase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen) {
                        loadingScreen.innerHTML = `
                            <div style="text-align: center; padding: 40px;">
                                <h2>‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º</h2>
                                <p>–ù–µ —É–¥–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.</p>
                                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
                                <button onclick="location.reload()" style="margin: 10px; padding: 10px 20px; background: #2563eb; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                    –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                                </button>
                                <button onclick="clearCacheAndReload()" style="margin: 10px; padding: 10px 20px; background: #dc2626; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                    –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –æ–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        `;
                    }
                }, 1000);
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞
        function clearCacheAndReload() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                }).then(() => {
                    if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.getRegistrations().then(registrations => {
                            registrations.forEach(registration => {
                                registration.unregister();
                            });
                        }).then(() => {
                            window.location.reload(true);
                        });
                    } else {
                        window.location.reload(true);
                    }
                });
            } else {
                window.location.reload(true);
            }
        }
    </script>
    <!-- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–∫—Ä—ã—Ç–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <script>
        console.log('üö® –ó–ê–ü–£–°–ö –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ì–û –¢–ê–ô–ú–ï–†–ê –°–ö–†–´–¢–ò–Ø –ó–ê–ì–†–£–ó–ö–ò');
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
        setTimeout(function() {
            console.log('üö® –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –°–ö–†–´–¢–ò–ï –ó–ê–ì–†–£–ó–ö–ò (HTML —Ç–∞–π–º–µ—Ä)');
            const loadingScreen = document.getElementById('loading-screen');
            const authScreen = document.getElementById('auth-screen');
            const mainApp = document.getElementById('main-app');
            
            if (loadingScreen && !loadingScreen.classList.contains('hidden')) {
                console.log('üîß –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ HTML');
                loadingScreen.classList.add('hidden');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                if (authScreen) authScreen.classList.remove('hidden');
                if (mainApp) mainApp.classList.add('hidden');
                
                console.log('‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –∏–∑ HTML –≤—ã–ø–æ–ª–Ω–µ–Ω–æ');
            }
        }, 10000);
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        window.emergencyHideLoading = function() {
            console.log('üÜò –≠–ö–°–¢–†–ï–ù–ù–û–ï –°–ö–†–´–¢–ò–ï –ó–ê–ì–†–£–ó–ö–ò');
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('auth-screen').classList.remove('hidden');
            document.getElementById('main-app').classList.add('hidden');
        };
    </script>
    
    <script src="supabase-fallback.js?v=2.6.0&t=1730811456"></script>
    <script src="main.js?v=3.5.0&t=1730814500"></script>
    
    <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registered: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html> 